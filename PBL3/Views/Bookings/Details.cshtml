@model PBL3.Models.Ticket
@{
    ViewData["Title"] = "Chi tiết Vé";
}

<h4>@ViewData["Title"] - Mã vé: @Model.TicketId</h4>
<hr />
@await Html.PartialAsync("_StatusMessagePartial")

<div class="row">
    <div class="col-md-6">
        <h5>Thông tin Hành khách</h5>
        @if (Model.Passenger != null)
        {
            <dl class="row">
                <dt class="col-sm-4">Họ tên:</dt>
                <dd class="col-sm-8">@Model.Passenger.FullName</dd>
                <dt class="col-sm-4">Email:</dt>
                <dd class="col-sm-8">@Model.Passenger.Email</dd>
                <dt class="col-sm-4">Tuổi:</dt>
                <dd class="col-sm-8">@Model.Passenger.Age</dd>
                <dt class="col-sm-4">Địa chỉ:</dt>
                <dd class="col-sm-8">@Model.Passenger.Address</dd>
            </dl>
        }
        else
        {
            <p class="text-muted">Không có thông tin hành khách.</p>
        }
    </div>
    <div class="col-md-6">
        <h5>Thông tin Chuyến bay</h5>
        @if (Model.Flight != null)
        {
            <dl class="row">
                <dt class="col-sm-4">Số hiệu:</dt>
                <dd class="col-sm-8">@Model.Flight.FlightNumber</dd>
                <dt class="col-sm-4">Hãng bay:</dt>
                <dd class="col-sm-8">@Model.Flight.Airline</dd>
                <dt class="col-sm-4">Điểm đi:</dt>
                <dd class="col-sm-8">@Model.Flight.StartingDestination</dd>
                <dt class="col-sm-4">Điểm đến:</dt>
                <dd class="col-sm-8">@Model.Flight.ReachingDestination</dd>
                <dt class="col-sm-4">Khởi hành:</dt>
                <dd class="col-sm-8">@Model.Flight.StartingTime.ToString("dd/MM/yyyy HH:mm")</dd>
                <dt class="col-sm-4">Đến nơi:</dt>
                <dd class="col-sm-8">@Model.Flight.ReachingTime.ToString("dd/MM/yyyy HH:mm")</dd>
            </dl>
        }
        else
        {
            <p class="text-muted">Không có thông tin chuyến bay.</p>
        }
    </div>
</div>
<hr />
<h5>Thông tin Vé</h5>
<dl class="row">
    <dt class="col-sm-3">Mã vé:</dt>
    <dd class="col-sm-9">@Model.TicketId</dd>
    <dt class="col-sm-3">Số ghế:</dt>
    <dd class="col-sm-9">@(Model.SeatNumber ?? "Chưa gán")</dd>
    <dt class="col-sm-3">Khu vực (Section):</dt>
    <dd class="col-sm-9">@(Model.Section?.SectionName ?? "Không xác định")</dd>
    <dt class="col-sm-3">Giá vé:</dt>
    <dd class="col-sm-9 fw-bold text-danger">@Model.Price.ToString("N0") VNĐ</dd>
    <dt class="col-sm-3">Thời gian đặt:</dt>
    <dd class="col-sm-9">@Model.OrderTime.ToString("dd/MM/yyyy HH:mm:ss")</dd>
    <dt class="col-sm-3">Trạng thái:</dt>
    <dd class="col-sm-9">
        @if (Model.Status == "Booked")
        {
            <span class="badge bg-success fs-6">Đã đặt</span>
        }
        else if (Model.Status == "Cancelled")
        {
            <span class="badge bg-danger fs-6">Đã hủy</span>
        }
        else
        {
            <span class="badge bg-secondary fs-6">@Model.Status</span>
        }
    </dd>
    @if (Model.BookingEmployee != null)
    {
        <dt class="col-sm-3">NV xử lý:</dt>
        <dd class="col-sm-9">@Model.BookingEmployee.FullName (@Model.BookingEmployee.Email)</dd>
    }
</dl>

<div class="mt-3">
    @if (Model.Status == "Booked")
    {
        <a asp-action="Cancel" asp-route-id="@Model.TicketId" class="btn btn-danger">Hủy vé này</a>
    }
    <a asp-action="Index" class="btn btn-secondary">Quay lại danh sách vé</a>
</div>